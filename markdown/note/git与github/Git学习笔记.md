# æ‰‹æ’•Gitï¼Œå‘Šåˆ«ç›²ç›®è®°å¿†

***



æ–‡ç« å‡ºè‡ªï¼šhttps://zhuanlan.zhihu.com/p/98679880

## æ–‡ç« å¯¼è¯»

- Gitçš„åˆ†åŒºï¼ˆå·¥ä½œåŒºï¼Œæš‚å­˜åŒºï¼Œç‰ˆæœ¬åº“ï¼‰
- Gitçš„åŸç†
- Gitåˆ†æ”¯
- ç‰ˆæœ¬çš„å›æ»šï¼ˆrevertï¼Œresetï¼‰
- ä»£ç æš‚å­˜ï¼ˆstashï¼‰

## å°æ¦‚è¿°-ä½•ä¸ºGit

> Gitæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œä¸ºäº†å¿«é€Ÿé«˜æ•ˆåœ°å¤„ç†å°åˆ°å¤§å‹é¡¹ç›®çš„æ‰€æœ‰å†…å®¹ã€‚é€šè¿‡å¯¹ä¿¡æ¯çš„å‹ç¼©å’Œæ‘˜è¦ï¼Œä½¿å¾—æ‰€å ç©ºé—´éå¸¸å°ï¼Œä½†èƒ½å¤Ÿæ”¯æŒé¡¹ç›®ç‰ˆæœ¬è¿…é€Ÿè¿­ä»£çš„å¼€å‘å·¥å…·ã€‚

### **ä¸€ã€Gitçš„åˆ†åŒº**

æœ¬ç« ä¸»è¦ä»åŸºç¡€å…¥æ‰‹ï¼Œå…ˆä»‹ç»gitçš„åˆ†åŒºã€‚

**1.1 ä¸‰å¤§åˆ†åŒº**

- å·¥ä½œåŒºï¼Œä¹Ÿå«å·¥ä½œæ ‘ï¼ŒWorking Directory
- æš‚å­˜åŒºï¼Œä¹Ÿå«stageï¼Œindex
- ç‰ˆæœ¬åº“ï¼Œä¹Ÿå«æœ¬åœ°ä»“åº“ï¼Œcommit History

å½“æˆ‘ä»¬æŠŠä»£ç ä»git hubæ¡£ä¸‹æ¥æˆ–è€…è¯´åˆå§‹åŒ–gité¡¹ç›®åï¼Œä¾¿æœ‰äº†è¿™ä¸‰ä¸ªåˆ†åŒºçš„æ¦‚å¿µã€‚

æ–‡ä»¶åœ¨Gitä¸åŒåˆ†åŒºä¸­çš„è¡¨ç°ï¼š

![img](https://pic1.zhimg.com/80/v2-8288c8c09056ce308f20f781f447fd6c_720w.jpg)

**å·¥ä½œåŒº**
å·¥ä½œåŒºåº”è¯¥ä¸é™Œç”Ÿï¼Œå°±æ˜¯æˆ‘ä»¬èƒ½çœ‹è§ï¼Œç›´æ¥ç¼–è¾‘çš„åŒºåŸŸã€‚å¯¹äºä¸€äº›æ–°å¢çš„æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰è¢«addåˆ°æš‚å­˜åŒºï¼Œå°±ä¼šä»¥çº¢è‰²çš„å½¢å¼æ”¾ç½®åœ¨å·¥ä½œåŒºã€‚

**æš‚å­˜åŒº**
æ•°æ®æš‚æ—¶å­˜æ”¾çš„åŒºåŸŸï¼Œå¯¹äº**add** gitç‰ˆæœ¬æ§åˆ¶çš„æ–‡ä»¶ï¼Œå°±ç®—æ˜¯è¿›å…¥æš‚å­˜åŒºå•¦ã€‚å¯ä»¥ç†è§£ä¸ºæ•°æ®è¿›å…¥æœ¬åœ°ä»£ç ä»“åº“ä¹‹å‰å­˜æ”¾çš„åŒºåŸŸã€‚ç”±äºè¿˜æ²¡å¯¹æœ¬åœ°ä»“åº“ç”Ÿæ•ˆï¼Œæ‰€ä»¥æ˜¯æ•°æ®æš‚æ—¶å­˜æ”¾çš„åŒºåŸŸã€‚

å¯¹æš‚å­˜åŒºçš„æ–‡ä»¶ä¿®æ”¹åï¼Œä¼šä»¥è“è‰²çš„å½¢å¼æ˜¾ç¤ºã€‚å¦‚æœç¬¬ä¸€æ¬¡åˆ›å»ºå¹¶addåˆ°æš‚å­˜åŒºçš„æ–‡ä»¶ï¼Œç”±äºè¿œç¨‹ä»“åº“æ²¡æœ‰åŒæ­¥ï¼Œæ‰€ä»¥ä¼šæ˜¾ç¤ºç»¿è‰²ã€‚

æ³¨ï¼šå­˜æ”¾åœ¨ ".gitç›®å½•ä¸‹" ä¸‹çš„indexæ–‡ä»¶ï¼ˆ.git/indexï¼‰ä¸­

**ç‰ˆæœ¬åº“**
åœ¨æš‚å­˜åŒº**commit**çš„ä»£ç ä¼šè¢«æ”¾å…¥ç‰ˆæœ¬åº“ä¸­ã€‚å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæœ¬åœ°çš„ä»£ç ä»“åº“ï¼Œpushçš„æ—¶å€™ï¼Œæ‰ä¼šæŠŠç‰ˆæœ¬åº“çš„æ•°æ®å…¨éƒ½å‘é€åˆ°è¿œç¨‹ä»“åº“ä¸­ã€‚

æ³¨ï¼šå­˜æ”¾åœ¨å·¥ä½œåŒºä¸­â€œ.gitâ€ç›®å½•ä¸‹ã€‚

![img](https://pic1.zhimg.com/80/v2-1679362b21db8776fc27a7b1d042dca4_720w.jpg)å›¾ç‰‡æ¥æºäºç½‘ç»œ

æ‰©å±•é˜…è¯»ï¼š
[https://juejin.im/post/5b6c4eeff265da0f4d0da3fa](https://link.zhihu.com/?target=https%3A//juejin.im/post/5b6c4eeff265da0f4d0da3fa)
[https://www.runoob.com/git/git-workspace-index-repo.html](https://link.zhihu.com/?target=https%3A//www.runoob.com/git/git-workspace-index-repo.html)

### **1.2** æ¶‰åŠæŒ‡ä»¤

**1.2.1 åˆ†åŒºè½¬æ¢æŒ‡ä»¤**

**git add**
æ•°æ®ä»å·¥ä½œåŒºè½¬ç§»è‡³æš‚å­˜åŒº

**git commit**
æ•°æ®ä»æš‚å­˜åŒºè½¬ç§»è‡³ç‰ˆæœ¬åº“ï¼Œä¹Ÿå°±æ˜¯æœ¬åœ°ä»“åº“

**git push**
æ•°æ®ä»ç‰ˆæœ¬åº“ä¸­å‘é€åˆ°è¿œç¨‹ä»“åº“

æŒ‡ä»¤å¤ªå¤šï¼Ÿä¸€å¼ å›¾å°±èƒ½è®°ä¸‹ï½

![img](https://pic1.zhimg.com/80/v2-8e73605a803bd29ceacd86923e08f5f0_720w.jpg)

**1.2.2 åˆ†åŒºå¯¹æ¯”æŒ‡ä»¤**

**git diff**
å·¥ä½œåŒºä¸æš‚å­˜åŒºå¯¹æ¯”

**git diff head**
å·¥ä½œåŒºä¸ç‰ˆæœ¬åº“å¯¹æ¯”

**git diff --cached**
æš‚å­˜åŒºä¸ç‰ˆæœ¬åº“å¯¹æ¯”

æŒ‡ä»¤å¤ªå¤šï¼Ÿä¸€å¼ å›¾å°±èƒ½è®°ä¸‹ï½

![img](https://pic2.zhimg.com/80/v2-e95ac3baeb28734107f8bec468525661_720w.jpg)

## äºŒã€Gitçš„åŸç†

æ“ä½œGitä»£ç åº“å‰ï¼Œä¸€å®šè¦äº†è§£Gitæ˜¯æ€ä¹ˆè®°å½•æ¯æ¬¡æäº¤çš„ä»£ç å˜åŒ–çš„ï¼Ÿæ¢å¥è¯è¯´ï¼Œæ¯ä¸€æ¬¡commitåœ¨ä¿è¯å¼€å‘æ•ˆç‡çš„å‰æä¸‹ï¼Œéƒ½æäº¤äº†ä»€ä¹ˆï¼Ÿ

### **2.1 gitå¦‚ä½•å­˜å‚¨æ–‡ä»¶/ç›®å½•ä¿¡æ¯**

é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨`git init`ï¼Œåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„gité¡¹ç›®ã€‚è¿™ä¸ªç›®å½•ä¼šåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»º.gitçš„éšè—ç›®å½•ï¼Œç›¸ä¿¡å¤§å®¶éƒ½ä¸é™Œç”Ÿã€‚

```powershell
MacBook-Pro:wuya eleme$ git init
å·²åˆå§‹åŒ–ç©ºçš„ Git ä»“åº“äº /Users/eleme/wuya/.git/
```

ç„¶åæŸ¥çœ‹ä¸€ä¸‹.gitçš„ç›®å½•æ ‘

```powershell
MacBook-Pro:wuya eleme$ tree -a
.
â””â”€â”€ .git
    â”œâ”€â”€ HEAD
    â”œâ”€â”€ config
    â”œâ”€â”€ description
    â”œâ”€â”€ hooks
    â”‚   â”œâ”€â”€ applypatch-msg.sample
    â”‚   â”œâ”€â”€ commit-msg.sample
    â”‚   â”œâ”€â”€ fsmonitor-watchman.sample
    â”‚   â”œâ”€â”€ post-update.sample
    â”‚   â”œâ”€â”€ pre-applypatch.sample
    â”‚   â”œâ”€â”€ pre-commit.sample
    â”‚   â”œâ”€â”€ pre-push.sample
    â”‚   â”œâ”€â”€ pre-rebase.sample
    â”‚   â”œâ”€â”€ pre-receive.sample
    â”‚   â”œâ”€â”€ prepare-commit-msg.sample
    â”‚   â””â”€â”€ update.sample
    â”œâ”€â”€ info
    â”‚   â””â”€â”€ exclude
    â”œâ”€â”€ objects
    â”‚   â”œâ”€â”€ info
    â”‚   â””â”€â”€ pack
    â””â”€â”€ refs
        â”œâ”€â”€ heads
        â””â”€â”€ tags

9 directories, 15 files
```

æˆ‘ä»¬ä¼šå‘ç°ï¼Œæœ‰ä¸€ä¸ªå«Objectsçš„ç›®å½•ã€‚è¿™ä¸ªç›®å½•å°±æ˜¯**å­˜å‚¨æ–‡ä»¶å˜åŒ–çš„æ ¸å¿ƒ**ã€‚æˆ‘ä»¬å¾€å·¥ä½œåŒºä¸­å­˜å…¥ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶a.mdå’Œä¸€ä¸ªtestæ–‡ä»¶å¤¹å¹¶æŸ¥çœ‹objectså‘ç”Ÿçš„å˜åŒ–ã€‚

```powershell
MacBook-Pro:wuya eleme$ echo 'test1' > a.md
MacBook-Pro:wuya eleme$ mkdir test
MacBook-Pro:wuya eleme$ echo 'test2' > test/b.md
MacBook-Pro:wuya eleme$ git add a.md test
MacBook-Pro:wuya eleme$ tree -a .git/objects
.git/objects
â”œâ”€â”€ 18
â”‚   â””â”€â”€ 0cf8328022becee9aaa2577a8f84ea2b9f3827
â”œâ”€â”€ 9d
â”‚   â””â”€â”€ aeafb9864cf43055ae93beb0afd6c7d144bfa4
â”œâ”€â”€ info
â””â”€â”€ pack

4 directories, 2 files
```

æ³¨æ„ï¼Œæ–‡ä»¶å¤¹æ”¾å…¥åˆ°æš‚å­˜åŒºåï¼Œå¹¶ä¸ä¼šé©¬ä¸Šåœ¨objectsä¸­æ˜¾ç¤ºï¼Œcommitåæ‰ä¼šã€‚æ­¤æ—¶å¤šäº†ä¸¤ä¸ªæ–‡ä»¶ï¼Œå…¶å®å°±æ˜¯ä¿®æ”¹è¿‡çš„ä¸¤ä¸ªæ–‡ä»¶ä»¥åŠä¿®æ”¹å†…å®¹ã€‚

Objectsä¸‹å­˜æ”¾çš„**æ–‡ä»¶å**å°±æ˜¯æ ¹æ®SHA1ç®—æ³•å“ˆå¸Œçš„â€œæŒ‡çº¹â€ï¼Œä¸ºäº†èƒ½å¤Ÿåœ¨æœ¬ä»“åº“ä¸­å’Œå…¶ä»–æ–‡ä»¶åŒºåˆ†å‡ºæ¥ã€‚**æ–‡ä»¶å†…å®¹**å°±æ˜¯Gitå°†ä¿¡æ¯å‹ç¼©åå½¢æˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚
é€šè¿‡`git cat-file [-t] [-p]`ï¼Œå¯ä»¥çœ‹åˆ°Objectçš„ç±»å‹ä¸æ–‡ä»¶çš„å†…å®¹ã€‚

```powershell
MacBook-Pro:wuya eleme$ git cat-file -t 9dae
blob
MacBook-Pro:wuya eleme$ git cat-file -p 9dae
test1
```

é€šè¿‡`git hash-object a.md`èƒ½å¤Ÿæ˜¾ç¤ºè¯¥æ–‡ä»¶åœ¨æœ¬ä»“åº“ç”Ÿæˆçš„hashå€¼ï¼Œä¸ä¹‹å‰çš„ç›®å½•æ ‘æ˜¾ç¤ºæ˜¯å¯¹åº”çš„ã€‚

```powershell
MacBook-Pro:wuya eleme$ git hash-object a.md
9daeafb9864cf43055ae93beb0afd6c7d144bfa4
```

### **2.2 git Objectçš„ç±»å‹**

git Objectæœ‰ä¸‰ç§ç±»å‹ï¼š

- Blob
- Tree
- Commit

ç®€å•æ¥è¯´ï¼Œ**æ–‡ä»¶**éƒ½è¢«å­˜å‚¨ä¸ºBlobç±»å‹ï¼Œ**æ–‡ä»¶å¤¹**åˆ™ä¸ºTreeç±»å‹ï¼Œæ¯æ¬¡**æäº¤çš„èŠ‚ç‚¹**è¢«å­˜å‚¨ä¸ºCommitç±»å‹æ•°æ®ã€‚å› æ­¤ï¼ŒGitä¼šä»¥è¿™ä¸‰ç§ç±»å‹æ¥å­˜å‚¨æˆ‘ä»¬çš„æ–‡ä»¶ã€‚ç®€å•çœ‹ä¸‹ç›®å½•å­˜å‚¨çš„æ˜ å°„å…³ç³»ï¼š

![img](https://pic1.zhimg.com/80/v2-b1da1f9d9ba4212b80a98000e80f75d4_720w.jpg)

åˆæ­¥çŒœæƒ³ï¼Œå¦‚æœæŠŠè¿™äº›æ–‡ä»¶éƒ½commitåˆ°ä»£ç åº“ï¼Œobjectsç›®å½•åº”è¯¥ä¼šæœ‰4ä¸ªç›®å½•ã€‚å³2ä¸ªblobï¼Œ1ä¸ªtreeï¼Œ1ä¸ªcommitã€‚

```powershell
MacBook-Pro:wuya eleme$ git commit -a -m "åŠ å…¥åˆ°ä»£ç åº“ä¸­ï¼Œè§‚å¯Ÿobjectsç›®å½•å˜åŒ–"
[masterï¼ˆæ ¹æäº¤ï¼‰ a16b538] åŠ å…¥åˆ°ä»£ç åº“ä¸­ï¼Œè§‚å¯Ÿobjectsç›®å½•å˜åŒ–
 2 files changed, 2 insertions(+)
 create mode 100644 a.md
 create mode 100644 test/b.md
MacBook-Pro:wuya eleme$ tree -a .git/objects
.git/objects
â”œâ”€â”€ 18
â”‚   â””â”€â”€ 0cf8328022becee9aaa2577a8f84ea2b9f3827
â”œâ”€â”€ 21
â”‚   â””â”€â”€ d0758079bdf2c8f7514687174454c804eb0c74
â”œâ”€â”€ 9d
â”‚   â””â”€â”€ aeafb9864cf43055ae93beb0afd6c7d144bfa4
â”œâ”€â”€ a1
â”‚   â””â”€â”€ 6b5382a9b646a7df8d21301391f29b2f7bfb65
â”œâ”€â”€ a7
â”‚   â””â”€â”€ 6c93bb75184ef4b34c88a301c2351ae2219407
â”œâ”€â”€ info
â””â”€â”€ pack

7 directories, 5 files
```

ç„¶é¹…äº‹å®å´æ˜¯....5ä¸ªç›®å½•ï¼å¤šå‡ºçš„é‚£ä¸€ä¸ªæ˜¯ä»€ä¹ˆï¼Ÿä¸€ä¸ªä¸€ä¸ªè¾“å‡ºçœ‹çœ‹ã€‚

```powershell
MacBook-Pro:wuya eleme$ git cat-file -p 9dae
test1
MacBook-Pro:wuya eleme$ git cat-file -p 180c
test2
MacBook-Pro:wuya eleme$ git cat-file -p 21d0
100644 blob 180cf8328022becee9aaa2577a8f84ea2b9f3827	b.md
MacBook-Pro:wuya eleme$ git cat-file -p a16b
tree a76c93bb75184ef4b34c88a301c2351ae2219407
author eleme <xxxx@qq.com> 1576979515 +0800
committer eleme <xxxx@qq.com> 1576979515 +0800

åŠ å…¥åˆ°ä»£ç åº“ä¸­ï¼Œè§‚å¯Ÿobjectsç›®å½•å˜åŒ–
MacBook-Pro:wuya eleme$ git cat-file -p a76c
100644 blob 9daeafb9864cf43055ae93beb0afd6c7d144bfa4	a.md
040000 tree 21d0758079bdf2c8f7514687174454c804eb0c74	test
```

æ•´ç†ä¸€ä¸‹å„è‡ªç±»å‹ï¼š

- 9dae-blob
- 180c-blob
- 21d0-tree
- a16b-commit
- a76c-tree

ä»”ç»†ä¸€æƒ³å…¶å®ä¹Ÿå°±é€šäº†ï¼Œä¸¤ä¸ªtreeæ˜¯**gitæ ¹ç›®å½•å’Œtestç›®å½•**ã€‚
å¯ä»¥å¾—å‡ºè¿™æ ·ä¸€ä¸ªç»“è®ºï¼šæ¯ä¸€æ¬¡commitï¼Œéƒ½ä¼šç”Ÿæˆä¸ä¹‹å¯¹åº”çš„commit hashå€¼ã€‚æŸ¥çœ‹å†å²commitä¹Ÿå¾ˆå®¹æ˜“å¾—å‡ºè¿™ä¸ªç»“è®ºï¼š

![img](https://pic2.zhimg.com/80/v2-bc51d779f84b5bb0c0078d4ceb28efc9_720w.jpg)

æ‰©å±•é˜…è¯»ï¼š
[https://mp.weixin.qq.com/s/d4WA02Y22gdWRbmmwfPEHQ](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/d4WA02Y22gdWRbmmwfPEHQ)

## ä¸‰ã€Gitåˆ†æ”¯

### **3.1 åˆæ¢Gitåˆ†æ”¯**

åœ¨å­¦ä¹ Gitåˆ†æ”¯ä¹‹å‰ï¼Œè¿˜æ˜¯ä»gitçš„ç›®å½•æ ‘å…¥æ‰‹ã€‚

```powershell
MacBook-Pro:wuya eleme$ tree -a .git
.git
â”œâ”€â”€ ......
â”œâ”€â”€ HEAD
â””â”€â”€ refs
    â”œâ”€â”€ heads
    â”‚   â””â”€â”€ master
    â”œâ”€â”€ remotes
    â”‚   â””â”€â”€ origin
    â”‚       â””â”€â”€ HEAD
    â””â”€â”€ tags
```

ä¸éš¾çœ‹å‡ºrefsç›®å½•å°±æ˜¯ç”¨æ¥è®°å½•å½“å‰å¯¹åˆ†æ”¯çš„å¼•ç”¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬**æœ¬åœ°åˆ†æ”¯ï¼Œè¿œç¨‹åˆ†æ”¯ï¼Œæ ‡ç­¾**ã€‚

headsè®°å½•çš„æ˜¯æœ¬åœ°æ‰€æœ‰åˆ†æ”¯ï¼Œremoteså’ŒHEADä¸€æ ·ï¼ŒæŒ‡å‘**å¯¹åº”çš„æŸä¸ªè¿œç¨‹åˆ†æ”¯**ã€‚

```powershell
MacBook-Pro:wuya eleme$ cat .git/refs/heads/master
a16b5382a9b646a7df8d21301391f29b2f7bfb65
```

ç»†å¿ƒäº›å°±ä¼šå‘ç°ï¼Œè¿™ä¸ªhashå€¼å°±æ˜¯**commitèŠ‚ç‚¹çš„hashå€¼**ã€‚

è€Œ**HEAD**å°±æ˜¯å­˜å‚¨å½“å‰åœ¨å“ªä¸ªæœ¬åœ°åˆ†æ”¯ã€‚æŸ¥çœ‹å…¶å†…å®¹ï¼Œå¯ä»¥å‘ç°ï¼š

```powershell
MacBook-Pro:.git eleme$ cat HEAD
ref: refs/heads/master
```

ä¹Ÿå°±æ„å‘³ç€ï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°çš„masterä¸Šã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡`git branch`æ¥åˆ›å»ºå…¶ä»–åˆ†æ”¯ã€‚

```powershell
MacBook-Pro:.git eleme$ git branch feature/dev
MacBook-Pro:.git eleme$ git branch feature/wuya
```

åˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯å¹¶æŸ¥çœ‹åˆ†æ”¯ä¿¡æ¯ï¼š

```powershell
elemedeMacBook-Pro:wuya eleme$ git checkout feature/dev
åˆ‡æ¢åˆ°åˆ†æ”¯ 'feature/dev'
elemedeMacBook-Pro:wuya eleme$ git branch -vv
* feature/dev  a16b538 åŠ å…¥åˆ°ä»£ç åº“ä¸­ï¼Œè§‚å¯Ÿobjectsç›®å½•å˜åŒ–
  feature/wuya a16b538 åŠ å…¥åˆ°ä»£ç åº“ä¸­ï¼Œè§‚å¯Ÿobjectsç›®å½•å˜åŒ–
  master       a16b538 åŠ å…¥åˆ°ä»£ç åº“ä¸­ï¼Œè§‚å¯Ÿobjectsç›®å½•å˜åŒ–
```

å› æ­¤å¯çŸ¥åˆ†æ”¯å½“å‰çš„æŒ‡é’ˆæŒ‡å‘æœ€è¿‘ä¸€æ¬¡commitçš„èŠ‚ç‚¹ã€‚**é€šè¿‡è°åˆ›å»ºçš„åˆ†æ”¯ï¼Œå°±æ²¿ç”¨è°çš„æŒ‡é’ˆ**ã€‚æ³¨ï¼šæœªè¢«æ”¾å…¥ä»£ç åº“çš„æ–‡ä»¶ä¼šåœ¨åˆ†æ”¯åˆ‡æ¢æ—¶è¢«æŠ›å¼ƒï¼Œé€ æˆä¸¥é‡åæœã€‚

### **3.2 åˆ†æ”¯çš„åˆå¹¶**

åˆ†æ”¯çš„åˆå¹¶æœ‰ä¸¤ç§æ–¹å¼ï¼Œ**merge**å’Œ**rebase**ã€‚

ç›¸åŒç‚¹ï¼šéƒ½æ˜¯ä»ä¸€ä¸ªåˆ†æ”¯è·å–å¹¶åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚

**merge**ï¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„commitï¼Œå¦‚æœé‡åˆ°å†²çªï¼Œä»…éœ€è¦ä¿®æ”¹åé‡æ–°commitã€‚

![img](https://pic1.zhimg.com/80/v2-009bf3dd1eb907bb84aa4970d4b7afd4_720w.jpg)

æ¯æ¬¡éƒ½è®°å½•äº†çœŸå®è¯¦ç»†çš„commitï¼Œä½†æ˜¯åœ¨commité¢‘ç¹çš„æ—¶å€™ï¼Œä¼šçœ‹åˆ°åˆ†æ”¯æ¯”è¾ƒä¹±ã€‚æ¯”å¦‚è¿™æ ·ï¼Œå…¨æ˜¯mergeäº§ç”Ÿçš„èŠ‚ç‚¹ï¼š

![img](https://pic2.zhimg.com/80/v2-221ac1d2610b17994333c00e8943c2a5_720w.jpg)

**rebase**ï¼šæ‰¾å…¬å…±çš„èŠ‚ç‚¹ï¼Œç›´æ¥åˆå¹¶ä¹‹å‰commitå†å²ã€‚

![img](https://pic2.zhimg.com/80/v2-d7029972815230a42ac73c108d19f67d_720w.jpg)

è¿™æ ·èƒ½å¾—åˆ°ç®€æ´çš„åˆ†æ”¯å‘å±•å†å²ï¼Œå»æ‰äº†merge commitã€‚ä½†æ˜¯å¦‚æœåˆå¹¶æ—¶å‡ºç°äº†é—®é¢˜ï¼Œæ²¡æœ‰ç•™ä¸‹ç—•è¿¹ï¼Œä¸å¥½å®šä½ã€‚

- git rebase --abortï¼šé‡åˆ°å†²çªæ—¶æ”¾å¼ƒåˆå¹¶ï¼Œå›åˆ°rebaseæ“ä½œä¹‹å‰çš„çŠ¶æ€ã€‚
- git rebase --continueï¼šåˆå¹¶å†²çªï¼Œç»“åˆ"git add æ–‡ä»¶"å‘½ä»¤ä¸€èµ·ï¼Œä¸€æ­¥ä¸€æ­¥åœ°è§£å†³å†²çªã€‚
- git rebase --skipï¼šå°†å¼•èµ·å†²çªçš„commitsä¸¢å¼ƒæ‰ã€‚

**å°ä¾‹å­**

è¿™é‡Œå¼•ç”¨ä¸€ä¸ªç½‘ä¸Šå½’çº³çš„git rebaseå·¥ä½œæµï¼š

```powershell
git rebase 
while(å­˜åœ¨å†²çª) {
    //æ‰¾åˆ°å½“å‰å†²çªæ–‡ä»¶ï¼Œç¼–è¾‘è§£å†³å†²çª
    git status
    git add -u
    git rebase --continue
    if( git rebase --abort )
        break; 
}
```

æ³¨ï¼šæœ€å¥½ä¸è¦åœ¨å…¬å…±åˆ†æ”¯ä¸Šä½¿ç”¨rebaseï¼Œå¦‚æœå‰ååŸºæœ¬ä¸Šä¸ä¼šæœ‰åˆ«äººæ”¹åŠ¨ä½ çš„åˆ†æ”¯ï¼Œé‚£ä¹ˆæ¨èrebaseã€‚

æ‰©å±•é˜…è¯»ï¼š
[https://blog.csdn.net/chenansic/article/details/44122107](https://link.zhihu.com/?target=https%3A//blog.csdn.net/chenansic/article/details/44122107)

### **3.3 åˆ†æ”¯çš„å†²çª**

**å†²çªçš„äº§ç”Ÿ**

å†²çªæ˜¯ä»åˆå¹¶çš„æ—¶å€™äº§ç”Ÿçš„ã€‚gitåˆ†æ”¯çš„åˆå¹¶ï¼Œå…¶å®å°±æ˜¯**treeå’Œtreeçš„åˆå¹¶**ã€‚æˆ‘ä»¬åœ¨feature/devä¸Šæ‰§è¡Œ`git merge master`æ—¶ã€‚**gitä¼šå…ˆæ‰¾åˆ°è¿™ä¸¤ä¸ªåˆ†æ”¯æ˜¯ä»å“ªä¸ªæŒ‡é’ˆåˆ›å»ºå‡ºæ¥çš„ï¼Œç§°ä¹‹ä¸ºâ€œmerge baseâ€ã€‚ç„¶åæ£€æŸ¥è¿™ä¸¤æ¬¡çš„treeæ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´è¯´æ˜ä¸€å®šæœ‰æ–‡ä»¶å‘ç”Ÿäº†ä¿®æ”¹ã€‚**æ¥ä¸‹æ¥ï¼Œå¯¹äºæŸä¸€ä¸ªæ–‡ä»¶æ¥è¯´ï¼Œåˆ†å‡ ç§æƒ…å†µï¼š

![img](https://pic1.zhimg.com/80/v2-bf2e0c9a245eaf25bf06cbad6ba086bc_720w.jpg)

1. æ–‡ä»¶åœ¨èŠ‚ç‚¹6ï¼ŒèŠ‚ç‚¹3ï¼Œmerge baseä¸­çš„hashå€¼**éƒ½ç›¸åŒ**ã€‚è¯´æ˜æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ã€‚ä¸ä¼šæœ‰å†²çªã€‚
2. æ–‡ä»¶åœ¨**èŠ‚ç‚¹6å’Œmerge base**æˆ–è€…**èŠ‚ç‚¹3å’Œmerge base**çš„hashå€¼ç›¸åŒæ—¶ï¼Œæ­¤æ—¶ç›´æ¥æ›´æ–°æ–‡ä»¶çš„å˜åŒ–ã€‚
3. æ–‡ä»¶åœ¨èŠ‚ç‚¹6ï¼Œmerge requestï¼Œmasterä¸Šçš„hashå€¼**éƒ½ä¸åŒ**ï¼Œå†²çªå°±äº§ç”Ÿäº†ã€‚

æ­¤æ—¶å°±éœ€è¦å¼€å‘äººå‘˜å•†å®šï¼Œè§£å†³å†²çªã€‚

## å››ã€ç‰ˆæœ¬çš„å›æ»š

å¦‚æœæƒ³è¦ç‰ˆæœ¬å›é€€ï¼Œå°±ç¦»ä¸å¼€resetå’Œrevertã€‚

**4.1 revert**

è¿™ä¸ªå°±ä¸€ç›®äº†ç„¶äº†ï¼Œæ‰§è¡Œ`git revert`åï¼Œå°†å›é€€åˆ°ä¸Šä¸€ä¸ªcommitçš„ç‰ˆæœ¬ã€‚

**4.2 reset**

> å‰æ®µæ—¶é—´ï¼Œçº¿ä¸Šå‡ºäº†å¥½å¤šç©ºæŒ‡é’ˆçš„bugï¼Œå½“æˆ‘æŸ¥çœ‹æ—¥å¿—å®šä½åˆ°æŸä¸€ä»£ç è¡Œæ—¶ï¼Œå‘ç°è¯¥è¡Œå®šä½ä¸åˆ°å¯¹åº”çš„æ–¹æ³•ä¸­ã€‚è¿™æ—¶å€™å°±å¿…é¡»**åˆ‡æ¢åˆ°çº¿ä¸Šçš„ä»£ç ç‰ˆæœ¬**è¿›è¡Œæ’æŸ¥äº†ã€‚

![img](https://pic3.zhimg.com/80/v2-c05d50580dfcd5fa3f013131f4fdf26e_720w.jpg)

**git reset**åˆ†ä¸ºä¸‰ç§æ¨¡å¼ï¼š

- soft
- mixed
- hard

ç”±äºæ¯ä¸€æ¬¡çš„commitéƒ½ä¼šäº§ç”Ÿä¸ä¹‹å¯¹åº”çš„hashå€¼ï¼Œæ‰€ä»¥å€ŸåŠ©è¿™ä¸ªè¿›è¡Œé‡ç½®å°±è½»æ¾å¤šäº†ã€‚

**git reset --hard commitçš„hashå€¼**
ä¼šé‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œå®Œå…¨é‡ç½®ä¸ºæŒ‡å®šçš„commitèŠ‚ç‚¹ã€‚å½“å‰åˆ†æ”¯æ²¡æœ‰commitçš„ä»£ç **å¿…ç„¶ä¼šè¢«æ¸…é™¤**ã€‚

**git reset --soft commitçš„hashå€¼**
ä¼šä¿ç•™å·¥ä½œç›®å½•ï¼Œå¹¶æŠŠæŒ‡å®šçš„commitèŠ‚ç‚¹ä¸å½“å‰åˆ†æ”¯çš„å·®å¼‚**éƒ½å­˜å…¥æš‚å­˜åŒº**ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡æœ‰è¢«commitçš„ä»£ç ä¹Ÿèƒ½å¤Ÿä¿ç•™ä¸‹æ¥ã€‚

**git reset commitçš„hashå€¼**
ä¸å¸¦å‚æ•°ï¼Œä¹Ÿå°±æ˜¯mixedæ¨¡å¼ã€‚å°†ä¼šä¿ç•™å·¥ä½œç›®å½•ï¼Œå¹¶ä¸”æŠŠå·¥ä½œåŒºï¼Œæš‚å­˜åŒºä»¥åŠä¸resetçš„å·®å¼‚**éƒ½æ”¾åˆ°å·¥ä½œåŒºï¼Œç„¶åæ¸…ç©ºæš‚å­˜åŒº**ã€‚å› æ­¤æ‰§è¡Œåï¼Œåªè¦æœ‰æ‰€å·®å¼‚ï¼Œæ–‡ä»¶éƒ½ä¼šå˜æˆçº¢è‰²ï¼Œå˜å¾—éš¾ä»¥åŒºåˆ†ã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨softæ¨¡å¼ï¼Œæ—¢èƒ½ä¿ç•™æš‚å­˜åŒºï¼Œåˆèƒ½resetåˆ°æŸä¸ªåˆ†æ”¯ã€‚

## äº”ã€ä»£ç æš‚å­˜

å½“æˆ‘ä»¬åœ¨å½“å‰åˆ†æ”¯å·¥ä½œæ—¶ï¼Œä¸å¾—å·²éœ€è¦åˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯å¤„ç†äº‹æƒ…è€Œä¸æƒ³commitæ—¶ï¼ˆå¦‚æœcommitå¤šäº†ï¼Œä¼šæ±¡æŸ“logï¼‰ï¼Œå¯ä»¥ä½¿ç”¨`git stash `å°†é‚£äº›æ•°æ®éƒ½æš‚å­˜åˆ°Gitæä¾›çš„æ ˆä¸­ã€‚ç”¨æ³•å¾ˆç®€å•ï½

**git stash**
æš‚å­˜ä¿®æ”¹è¿‡çš„ä»£ç ï¼Œä¿å­˜åœ¨**Gitæ ˆ**ä¸­ï¼Œç„¶åå°†å·¥ä½œåŒºè¿˜åŸæˆä¸Šä¸€æ¬¡commitçš„å†…å®¹ã€‚

```powershell
MacBook-Pro:young eleme$ git stash
ä¿å­˜å·¥ä½œç›®å½•å’Œç´¢å¼•çŠ¶æ€ WIP on wuya: 82371a5 ä¸Šä¸€æ¬¡commitå†™çš„message
```

**git stash list**
æ˜¾ç¤ºä¹‹å‰å‹æ ˆçš„æ‰€æœ‰è®°å½•ã€‚

```powershell
MacBook-Pro:young eleme$ git stash list
stash@{0}: WIP on aaa: 82371a5 ä¸Šä¸€æ¬¡commitå†™çš„message
```

**git stash clear**
æ¸…ç©ºGitæ ˆã€‚

**git stash apply**
ä»Gitæ ˆä¸­è¯»å–ä¸Šä¸€æ¬¡æš‚å­˜çš„é‚£äº›ä»£ç ï¼Œæ¢å¤å·¥ä½œåŒºã€‚

```powershell
MacBook-Pro:young eleme$ git stash apply
ä½äºåˆ†æ”¯ wuya
æ‚¨çš„åˆ†æ”¯ä¸ä¸Šæ¸¸åˆ†æ”¯ 'origin/wuya' ä¸€è‡´ã€‚

å°šæœªæš‚å­˜ä»¥å¤‡æäº¤çš„å˜æ›´ï¼š
  ï¼ˆä½¿ç”¨ "git add <æ–‡ä»¶>..." æ›´æ–°è¦æäº¤çš„å†…å®¹ï¼‰
  ï¼ˆä½¿ç”¨ "git checkout -- <æ–‡ä»¶>..." ä¸¢å¼ƒå·¥ä½œåŒºçš„æ”¹åŠ¨ï¼‰

        ä¿®æ”¹ï¼š     src/main/java/com/young/test/test1.java

ä¿®æ”¹å°šæœªåŠ å…¥æäº¤ï¼ˆä½¿ç”¨ "git add" å’Œ/æˆ– "git commit -a"ï¼‰
```

## æœ€å

å¸Œæœ›å¤§å®¶çš„Gitè¶Šç”¨è¶Š6ï¼Œå¦‚æœ‰ç–‘é—®ï¼Œæ¬¢è¿è¯„è®ºã€‚
ç„¶å...å‘å¾®åœ°æ±‚ä¸€æ³¢èµğŸ¥º

å‚è€ƒæ–‡ç« ï¼š
[https://juejin.im/post/5b6c4eeff265da0f4d0da3fa](https://link.zhihu.com/?target=https%3A//juejin.im/post/5b6c4eeff265da0f4d0da3fa)
[https://www.runoob.com/git/git-workspace-index-repo.html](https://link.zhihu.com/?target=https%3A//www.runoob.com/git/git-workspace-index-repo.html)
[https://mp.weixin.qq.com/s/d4WA02Y22gdWRbmmwfPEHQ](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/d4WA02Y22gdWRbmmwfPEHQ)
[https://blog.csdn.net/chenansic/article/details/44122107](https://link.zhihu.com/?target=https%3A//blog.csdn.net/chenansic/article/details/44122107)
https://zhuanlan.zhihu.com/p/96631135

ç¼–è¾‘äº 2020-01-10

ã€ŒçœŸè¯šèµèµï¼Œæ‰‹ç•™ä½™é¦™ã€

èµèµ

2 äººå·²èµèµ

[![èµèµç”¨æˆ·](https://pic4.zhimg.com/da8e974dc_is.jpg)](https://www.zhihu.com/people/yang-yun-sheng-26)[![èµèµç”¨æˆ·](https://pic1.zhimg.com/v2-e62a104c7115a03f2a3e3bbc6dab16ce_is.jpg)](https://www.zhihu.com/people/811211534)

[Git](https://www.zhihu.com/topic/19557710)

[ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ](https://www.zhihu.com/topic/19551033)

[ç‰ˆæœ¬ç®¡ç†](https://www.zhihu.com/topic/19566741)

å·²èµåŒ 157140 æ¡è¯„è®º

åˆ†äº«

æ”¶è—



å·²èµåŒ 1571

åˆ†äº«

### æ–‡ç« è¢«ä»¥ä¸‹ä¸“æ æ”¶å½•

- [![Javaä¿®ä»™é“è·¯](https://pic4.zhimg.com/v2-4c89749e9c314f734afcf214d2112c47_xs.jpg)](https://zhuanlan.zhihu.com/c_1087293936418197504)

- ## [Javaä¿®ä»™é“è·¯](https://zhuanlan.zhihu.com/c_1087293936418197504)

- è®°å½•å°èœé¸¡çš„å­¦ä¹ ç‚¹æ»´ï¼ŒèŸ¹èŸ¹å¤§ä½¬ä»¬æ§åœºï¼

- å…³æ³¨ä¸“æ 

- [![Javaé¢è¯•å¤§å…¨](https://pic2.zhimg.com/v2-d8a671c4f12c52486374d22f13075171_xs.jpg)](https://zhuanlan.zhihu.com/c_1035883039112572928)

- ## [Javaé¢è¯•å¤§å…¨](https://zhuanlan.zhihu.com/c_1035883039112572928)

- Javaè‡ªå¤ä»¥æ¥ä½œä¸ºæµè¡Œåº¦æœ€é«˜çš„è¯­è¨€ä¹‹ä¸€ï¼Œåœ¨å„è¡Œå„ä¸šéƒ½æœ‰å‡ºå½©çš„è¡¨ç°ï¼Œä½œä¸ºä¸€ä¸ªä»ä¸šè€…å­¦å¥½Javaå¹¶ç†è§£ä»–çš„å†…éƒ¨æœºç†è‡³ä¸ºé‡è¦ã€‚æ‰€ä»¥å…³æ³¨æˆ‘ä»¬å§ï¼Œä½ ä¼šåœ¨è¿™ä½¿ä½ çš„æŠ€èƒ½ç­‰åˆ°è¿›ä¸€æ­¥çš„æç¤ºã€‚

- å…³æ³¨ä¸“æ 

- [![JAVAè¿›é˜¶ä¹‹è·¯](https://pic2.zhimg.com/v2-f727f49083521209231b99dbf2dd5b9b_xs.jpg)](https://zhuanlan.zhihu.com/c_1081593244407640064)

- ## [JAVAè¿›é˜¶ä¹‹è·¯](https://zhuanlan.zhihu.com/c_1081593244407640064)

- æœ¬ä¸“æ ä¸»è¦æ˜¯ä¸ºäº†å¸®åŠ©æ›´å¤šçš„ç¨‹åºå‘˜ä»¬ï¼Œæ¬¢è¿å„ä½æŠ•ç¨¿ï¼Œå…è´¹æ¶æ„èµ„æºå’Œé¢è¯•ä¸“é¢˜èµ„æ–™åŠ QQç¾¤908676731å…è´¹è·å–

- å…³æ³¨ä¸“æ 

### æ¨èé˜…è¯»

- # Git å·¥ä½œæµ

- æœ¬æ–‡æ˜¯æˆ‘ä½¿ç”¨ Git ä¸€æ®µæ—¶é—´å’Œçœ‹è¿‡ä¸€äº›èµ„æ–™åçš„æ€»ç»“ï¼Œä»¥åŠä¸ªäººè§è§£ï¼Œæ·±æ„Ÿ Git çš„è§„èŒƒä½¿ç”¨éå¸¸é‡è¦ï¼Œä¸è§„èŒƒçš„ä½¿ç”¨ä¼šå¸¦æ¥å¾ˆå¤šéº»çƒ¦ã€‚ åŒç±»å·¥å…·æ¯”è¾ƒSVNä¸GitåŸç†ä¸ŠGitç›´æ¥è®°å½•æ–‡ä»¶å¿«ç…§ï¼ŒSVNæ¯æ¬¡â€¦

- äº”æ›´ç‰ç’ƒ

- # Gitå¸¸ç”¨å‘½ä»¤è¯¦è§£

- Gitç®€ä»‹Gitæ˜¯Linuxä¹‹çˆ¶Linusçš„ç¬¬äºŒä¸ªä¼Ÿå¤§çš„ä½œå“ï¼Œå®ƒæœ€æ—©æ˜¯åœ¨Linuxä¸Šå¼€å‘çš„ï¼Œè¢«ç”¨æ¥ç®¡ç†Linuxæ ¸å¿ƒçš„æºä»£ç ã€‚åæ¥æ…¢æ…¢åœ°æœ‰äººå°†å…¶ç§»æ¤åˆ°äº†Unixã€Windowsã€Max OSç­‰æ“ä½œç³»ç»Ÿä¸­ã€‚Gitæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼â€¦

- å¤æœ—å‘è¡¨äºWindy...

- ![40åˆ†é’Ÿgitä»å…¥é—¨åˆ°æ”¾å¼ƒ(è‹¦ç¬‘)](https://pic2.zhimg.com/v2-358ba38946f7aeb9f6c65999df8e050a_250x0.jpg)

- # 40åˆ†é’Ÿgitä»å…¥é—¨åˆ°æ”¾å¼ƒ(è‹¦ç¬‘)

- Lulus

- # çè—å¤šå¹´çš„ Git é—®é¢˜å’Œæ“ä½œæ¸…å•

- å¼•è¨€ æœ¬æ–‡æ•´ç†è‡ªå·¥ä½œå¤šå¹´ä»¥æ¥é‡åˆ°çš„æ‰€æœ‰ Git é—®é¢˜æ±‡æ€»ï¼Œä¹‹å‰éƒ½æ˜¯é—å¿˜çš„æ—¶å€™å»çœ‹ä¸€éæ“ä½œï¼Œè¿™æ¬¡é‡æ–°æ•´ç†äº†ä¸€ä¸‹ï¼Œå‘å‡ºæ¥æ–¹ä¾¿å¤§å®¶æ”¶è—ä»¥åŠéœ€è¦çš„æ—¶å€™æŸ¥æ‰¾ç­”æ¡ˆã€‚ ä¸€ã€å¿…å¤‡çŸ¥è¯†ç‚¹ ä»“åº“ Remote:è¿œâ€¦

- Bug-æˆ...å‘è¡¨äºç‰ˆæœ¬æ§åˆ¶å™¨

